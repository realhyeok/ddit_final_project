<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Task-Mapper">

	<select id="selectTaskCountByProjectNo" parameterType="String">
		SELECT
			COUNT(*)
		FROM
			TASK
		WHERE
			PROJ_NO = #{projNo}
	</select>

	<select id="selectTaskListByProjectNo" resultType="task" parameterType="String">
		SELECT
        	A.TASK_NO AS TASK_NO,
            A.TITLE AS TITLE,
            B.NICKNAME AS USER_ID,
            A.CONTENT AS CONTENT,
            A.IMPORTANT AS IMPORTANT,
            A.REGDATE AS REGDATE,
            A.UPDATEDATE AS UPDATEDATE,
            A.STARTDATE AS STARTDATE,
            A.ENDDATE AS ENDDATE,
            A.STATUS AS STATUS,
            A.DOC_CONT_NO AS DOC_CONT_NO
		FROM
        	TASK A
		JOIN
			"USER" B ON A.USER_ID = B.USER_ID
		WHERE
			A.PROJ_NO = #{projNo}
	</select>

	<select id="selectTaskDetailByTaskNo" resultType="task" parameterType="task">
		SELECT
        	A.TASK_NO AS TASK_NO,
            A.TITLE AS TITLE,
            B.NICKNAME AS USER_ID,
            A.CONTENT AS CONTENT,
            A.IMPORTANT AS IMPORTANT,
            A.REGDATE AS REGDATE,
            A.UPDATEDATE AS UPDATEDATE,
            A.STARTDATE AS STARTDATE,
            A.ENDDATE AS ENDDATE,
            A.STATUS AS STATUS,
            A.DOC_CONT_NO AS DOC_CONT_NO
		FROM
        	TASK A
		JOIN
			"USER" B ON A.USER_ID = B.USER_ID
		WHERE
			A.PROJ_NO = #{projNo}
		AND
			A.TASK_NO = #{taskNo}
	</select>
</mapper>